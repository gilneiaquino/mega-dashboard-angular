<div class="dashboard-container">

  <!-- Filtro -->
  <section class="filtro-section">
    <app-dashboard-filtro
      [valorInicial]="filtroAtual"
      (pesquisar)="onPesquisar($event)">
    </app-dashboard-filtro>
  </section>

  <!-- Overlay de loading -->
  <div class="overlay" *ngIf="loading">
    <div class="spinner"></div>
    <span>Carregando dados do dashboard...</span>
  </div>

  <!-- Mensagem de erro -->
  <div *ngIf="!loading && erro" class="estado-info erro">
    {{ erro }}
  </div>

  <!-- Conteúdo dos gráficos -->
  <section *ngIf="!loading && !erro" class="graficos-grid">

    <!-- Carteira Física -->
    <app-dashboard-card
      [titulo]="'Carteira Física'"
      [hasData]="dadosCarteiraFisica.length > 0">

      <ngx-charts-pie-chart
        [view]="view"
        [results]="dadosCarteiraFisica"
        [legend]="true"
        [labels]="true"
        [doughnut]="false"
        [explodeSlices]="false"
        [gradient]="false">
      </ngx-charts-pie-chart>

    </app-dashboard-card>

    <!-- Carteira Financeira -->
    <app-dashboard-card
      [titulo]="'Carteira Financeira'"
      [hasData]="dadosCarteiraFinanceira.length > 0">

      <ngx-charts-pie-chart
        [view]="view"
        [results]="dadosCarteiraFinanceira"
        [legend]="true"
        [labels]="true"
        [doughnut]="false"
        [explodeSlices]="false"
        [gradient]="false">
      </ngx-charts-pie-chart>

    </app-dashboard-card>

    <!-- Evolução -->
    <app-dashboard-card
      class="grafico-full"
      [titulo]="'Evolução'"
      [hasData]="dadosEvolucao.length > 0">

      <ngx-charts-bar-vertical-2d
        [view]="[view[0] * 2, view[1]]"
        [results]="dadosEvolucao"
        [xAxis]="true"
        [yAxis]="true"
        [legend]="true"
        [showXAxisLabel]="true"
        [showYAxisLabel]="true"
        [xAxisLabel]="'Período'"
        [yAxisLabel]="'Valor'">
      </ngx-charts-bar-vertical-2d>

    </app-dashboard-card>

  </section>
</div>
