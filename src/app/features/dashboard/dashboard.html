<div class="dashboard-container">
  <!-- Filtro -->
  <section class="filtro-section">
    <app-dashboard-filtro
      [valorInicial]="filtroAtual"
      (pesquisar)="onPesquisar($event)">
    </app-dashboard-filtro>
  </section>

  <!-- Estado de carregamento -->
  <div *ngIf="loading" class="estado-info">
    Carregando dados...
  </div>

  <!-- Mensagem de erro -->
  <div *ngIf="!loading && erro" class="estado-info erro">
    {{ erro }}
  </div>

  <!-- Conteúdo principal do dashboard -->
  <section *ngIf="!loading && !erro" class="graficos-grid">

    <!-- Gráfico 1: Carteira -->
    <div class="grafico-card">
      <h3>Carteira por situação</h3>

      <ngx-charts-pie-chart
        *ngIf="dadosCarteira?.length"
        [view]="view"
        [results]="dadosCarteira"
        [legend]="true"
        [labels]="true"
        [doughnut]="false"
        [explodeSlices]="false"
        [gradient]="false">
      </ngx-charts-pie-chart>

      <p *ngIf="!dadosCarteira?.length" class="sem-dados">
        Nenhum dado para exibir.
      </p>
    </div>

    <!-- Gráfico 2: Operações por etapa -->
    <div class="grafico-card">
      <h3>Operações por etapa</h3>

      <ngx-charts-bar-vertical
        *ngIf="dadosOperacoes?.length"
        [view]="view"
        [results]="dadosOperacoes"
        [xAxis]="true"
        [yAxis]="true"
        [legend]="false"
        [showXAxisLabel]="true"
        [showYAxisLabel]="true"
        [xAxisLabel]="'Etapa'"
        [yAxisLabel]="'Qtde.'">
      </ngx-charts-bar-vertical>

      <p *ngIf="!dadosOperacoes?.length" class="sem-dados">
        Nenhum dado para exibir.
      </p>
    </div>

  </section>
</div>
