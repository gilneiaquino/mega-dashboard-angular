<div class="dashboard-container">

  <!-- Filtro -->
  <section class="filtro-section">
    <app-dashboard-filtro
      [valorInicial]="filtroAtual"
      (pesquisar)="onPesquisar($event)">
    </app-dashboard-filtro>
  </section>

  <!-- Estados globais -->
  <div *ngIf="loading" class="estado-info">
    Carregando dados do dashboard...
  </div>

  <div *ngIf="!loading && erro" class="estado-info erro">
    {{ erro }}
  </div>

  <!-- Conteúdo dos gráficos -->
  <section *ngIf="!loading && !erro" class="graficos-grid">

    <!-- Gráfico 1: Carteira Física -->
    <div class="grafico-card">
      <h3>Carteira Física</h3>

      <ngx-charts-pie-chart
        *ngIf="dadosCarteiraFisica?.length"
        [view]="view"
        [results]="dadosCarteiraFisica"
        [legend]="true"
        [labels]="true"
        [doughnut]="false"
        [explodeSlices]="false"
        [gradient]="false">
      </ngx-charts-pie-chart>

      <p *ngIf="!dadosCarteiraFisica?.length" class="sem-dados">
        Nenhum dado para exibir.
      </p>
    </div>

    <!-- Gráfico 2: Carteira Financeira -->
    <div class="grafico-card">
      <h3>Carteira Financeira</h3>

      <ngx-charts-pie-chart
        *ngIf="dadosCarteiraFinanceira?.length"
        [view]="view"
        [results]="dadosCarteiraFinanceira"
        [legend]="true"
        [labels]="true"
        [doughnut]="false"
        [explodeSlices]="false"
        [gradient]="false">
      </ngx-charts-pie-chart>

      <p *ngIf="!dadosCarteiraFinanceira?.length" class="sem-dados">
        Nenhum dado para exibir.
      </p>
    </div>

    <!-- Gráfico 3: Evolução (barras com série) -->
    <div class="grafico-card grafico-full">
      <h3>Evolução</h3>

      <ngx-charts-bar-vertical-2d
        *ngIf="dadosEvolucao?.length"
        [view]="[view[0] * 2, view[1]]"
        [results]="dadosEvolucao"
        [xAxis]="true"
        [yAxis]="true"
        [legend]="true"
        [showXAxisLabel]="true"
        [showYAxisLabel]="true"
        [xAxisLabel]="'Período'"
        [yAxisLabel]="'Valor'">
      </ngx-charts-bar-vertical-2d>

      <p *ngIf="!dadosEvolucao?.length" class="sem-dados">
        Nenhum dado para exibir.
      </p>
    </div>

  </section>
</div>
